/*   
Template Name: Color Admin - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.3.4
Version: 1.7.0
Author: Sean Ngu
Website: http://www.seantheme.com/color-admin-v1.7/admin/
*/
var 
handleBootstrapWizardsValidation = function(){
	"use strict";
	$("#wizard").bwizard(
			{
				validating:function(e,t){
					var customerid = $('#wizard div.wizard-step-1').data('customerid');
					console.log(t)
					console.log(e)
					if(t.index==0){
						if(false===$('form[name="form-wizard"]').parsley().validate("wizard-step-1")) {
							return false;
						}else{
//							customerid = 
							if(customerid != undefined || customerid != null || customerid == ""){
								console.log("Not Saved")
								
							}else if(t.nextIndex > t.index){								
								var customerFullname = $('[name="fullname"]').val()
								var customerFatherName = $('[name="fathername"]').val()
								var customerMotherName = $('[name="mothername"]').val()
								var customerGender = $('[name="gender"]').val()
								var customerDob = $('[name="dob"]').val()
								var customerCNIC = $('[name="cnic"]').val()
								
								var customerPhone = $('[name="phone"]').val()							
								if(customerPhone == ""){
									customerPhone = "92"+customerPhone
								}
								
								var customerPhone2 = $('[name="phone2"]').val()
								if(customerPhone2 == ""){
									customerPhone2 = "92"+customerPhone2
								}
								
								var email = $('[name="email"]').val()
								var status = $('[name="status"]').val()
								var educated = $('[name="educated"]').val()
								var education = $('[name="education"]').val()
								var city = $('[name="city"]').val()
								var address = $('[name="address"]').val()
								
								console.log("Full name:   "+$('[name="fullname"]').val())
								console.log("customerFatherName = "+$('[name="fathername"]').val())
								console.log("customerMotherName = "+$('[name="mothername"]').val())
								console.log("customerGender = "+$('[name="gender"]').val())
								console.log("customerDob = "+$('[name="dob"]').val())
								console.log("customerCNIC = "+$('[name="cnic"]').val())
								console.log("customerPhone = "+$('[name="phone"]').val())
								console.log("customerPhone2 = "+$('[name="phone2"]').val())
								console.log("email = "+$('[name="email"]').val())
								console.log("status = "+$('[name="status"]').val())
								console.log("educated = "+$('[name="educated"]').val())
								console.log("education = "+$('[name="education"]').val())
								console.log("city = "+$('[name="city"]').val())
								console.log("address = "+$('[name="address"]').val())
								
								$.ajax({
									url : 'CustomerController',
									method : 'post',
									dataType : 'json',
									async : false,
									data : {
										action : "insertCustomer"
											,formWizard : 1
											,fullname : customerFullname
											,fathername : customerFatherName 
											,mothername : customerMotherName 
											,gender : customerGender 
											,dob :customerDob 
											,cnic : customerCNIC
											,phone : customerPhone 
											,phone2 : customerPhone2 
											,email : email 
											,status : status 
											,educated :educated 
											,education : education 
											,city : city 
											,address : address 
									},
									success : function(json){  
//									console.log(json)
										if(json.customerId > 0){
											$('#wizard div.wizard-step-1').data('customerid', json.customerId)
											console.log("Saved")
										
										}else{
											alert("Customer Not Added")
											return false;
										}
									}
									
									
								})
							}
							
						}
					}
					else if(t.index==1) {
//						console.log(t)
						
						if(false===$('form[name="form-wizard"]').parsley().validate("wizard-step-2")) {
							return false;
						}else if(t.nextIndex > t.index){
							if($('#wizard div.wizard-step-2').data('guardianid') == undefined 
									|| $('#wizard div.wizard-step-2').data('guardianid') == null
									|| $('#wizard div.wizard-step-2').data('guardianid') == ""){
								
								var guardianName = $('[name="guardian"]').val()
								var guardianPhone = $('[name="guardianPhone"]').val()
								var customerFamilySize = $('[name="customerfamily"]').val()
								var family = [];
								for(var j = 0; j < customerFamilySize; j++){
									family[j] = {
											childName : $('[name="childname'+(j+1)+'"]').val()
											,childRelation : $('[name="childrelation'+(j+1)+'"]').val()
											,childPhone : $('[name="childmobile'+(j+1)+'"]').val()
											,childDob: $('[name="child_dob'+(j+1)+'"]').val()
											,childCNIC: $('[name="childcnic'+(j+1)+'"]').val()
									}
								}
								
								console.log("guardianName : "+guardianName)
								console.log("guardianPhone : "+guardianPhone)
								console.log("guardianFamilySize : "+customerFamilySize)
								console.log("customerFamily : ")
								console.log(family)
								$.ajax({
									url : 'CustomerFormController',
									method : 'post',
									async : false,
									data : {
										action : "insertGuardian",
										customerid : customerid,
										customerGuardian : guardianName,
										customerPhone : guardianPhone,
										customerFamilySize : customerFamilySize,
										family : family
									},
									success : function(json){
										console.log("Saved")
//										console.log(json)
									}
								})
							}else{
								console.log("Not Saved")
							}
														
						}
					}	
					else if(t.index==2) {
//						console.log(t)
						console.log("Moved to 2")
						if(
								false
								===$('form[name="form-wizard"]').parsley().validate("wizard-step-3")
								) {
							return false;
						}else if(t.nextIndex > t.index){
							if($('#wizard div.wizard-step-3').data('assetsId') == undefined 
									|| $('#wizard div.wizard-step-3').data('assetsId') == null
									|| $('#wizard div.wizard-step-3').data('assetsId') == ""){
								
//								Begin Home Hold Assets
								var home = $('[name = "home"]').is(":checked")?1:0
								var car = $('[name = "car"]').is(":checked")?1:0
								var bike = $('[name = "bike"]').is(":checked")?1:0
								var wishingMachine = $('[name = "washingMachine"]').is(":checked")?1:0
								var fridge = $('[name = "fridge"]').is(":checked")?1:0
								var tv = $('[name = "tv"]').is(":checked")?1:0
								var otherAsset = $('[name = "other"]').val()
								$.ajax({
									url : 'CustomerFormController',
									method : 'post',
									data : {
										action : "homeHoldAssets"
										,customerId : customerid
										,home : home
										,car : car
										,motorcycle : bike
										,washingMachine : wishingMachine 
										,fridge : fridge
										,tv : tv
										,otherAsset : otherAsset
									},
									success : function(json){
										console.log(json)
										$('#wizard div.wizard-step-3').data("homeHoldAssets", json)
									}
								})
//								End Home Hold Assets
								
//								Begin Monthly Expensives
								var ups = $('[name = "ups"]').is(":checked")?"ups":""
								var electricity = $('[name = "electricity"]').is(":checked")?"electricity":""
								var generator = $('[name="generator"]').is(":checked")?"generator":""
								var solar = $('[name = "solar"]').is(":checked")?"solar":""
								var isOtherSource = $('[name = "otherelusage"]').is(":checked")?"otherelusage":""
								var otherSource = $('[name = "electricityusage"]').val()
								var electricityExpensive = $('[name = "electricityexpense"]').val()
								var majorExpenseDescription = $('[name = "majorexpensedescription"]').val()
								var majorExpenseAmount = $('[name = "majorexpenseamount"]').val()
								var totalExpense = $('[name = "totalexpense"]').val()
								$.ajax({
									url : 'CustomerFormController',
									method : 'post',
									data : {
										action : "monthlyHomeExpense"
										,customerId : customerid
										,ups : ups
										,gridElectricity : electricity
										,generator : generator
										,solar : solar
										,electricityUsage : otherSource
										,electricityExpensive : electricityExpensive 
										,majorExpenseDescription : majorExpenseDescription 
										,majorExpenseAmount : majorExpenseAmount 
										,totalExpense : totalExpense 
									},
									success : function(json){
										console.log(json)
										$('#wizard div.wizard-step-3').data("monthlyHomeExpense", json)
									}
								})
//								End Monthly Expensives
								
//								Begin Other Loan Details
								var isLoanTaken = $('[name = "isLoanTaken"][checked="checked"]').attr('id')=="LoanTaken"?1:0
								var donarName = $('[name = "donnerName"]').val()
								var loanPayment = $('[name = "loanPayment"]').val()==""?0:$('[name = "loanPayment"]').val()
								var loanPeriod = $('[name = "loanperiod"]').val() == ""?0:$('[name = "loanperiod"]').val()
								var monthlyInstallment = $('[name = "otherInstallment"]').val()==""?0:$('[name = "otherInstallment"]').val()
								var remaining = $('[name = "remaining"]').val()==""?0:$('[name = "remaining"]').val()
								var isBankAccount = $('[name = "isBankAccount"][checked="checked"]').attr("id")=="HaveAccount"?1:0
								var bankName = $('[name = "bankName"]').val()
								$.ajax({
									url : 'CustomerFormController',
									method : 'post',
									data : {
										action : "otherLoanDetails"
										,customerId : customerid
										,isLoanTaken : isLoanTaken 
										,donarName : donarName 
										,loanPayment : loanPayment 
										,loanPeriod : loanPeriod 
										,monthlyInstallment : monthlyInstallment 
										,remaining : remaining 
										,isBankAccount : isBankAccount 
										,bankName : bankName 
									},
									success : function(json){
										console.log(json)
										$('#wizard div.wizard-step-3').data("otherLoanDetails", json)
									}
								})
								
//								End Other Loan Details

								console.log("isLoanTaken "+isLoanTaken)
//								console.log("donarName = "+donarName )
//								console.log("loanPayment = "+loanPayment )
//								console.log("loanPeriod = "+loanPeriod )
//								console.log("monthlyInstallment = "+monthlyInstallment )
//								console.log("remaining = "+remaining )
								console.log("isBankAccount = "+isBankAccount )
//								console.log("bankName = "+bankName )
//								console.log("ups = "+ups )
//								console.log("electricity = "+electricity )
//								console.log("solar = "+solar )
//								console.log("isOtherSource = "+isOtherSource )
//								console.log("otherSource = "+otherSource )
//								console.log("electricityExpensive = "+electricityExpensive )
//								console.log("majorExpenseDescription = "+majorExpenseDescription )
//								console.log("majorExpenseAmount = "+majorExpenseAmount )
//								console.log("totalExpense = "+totalExpense )
//								console.log("home = "+home )
//								console.log("car = "+car )
//								console.log("bike = "+bike )
//								console.log("wishingMachine = "+wishingMachine )
//								console.log("fridge = "+fridge )
//								console.log("tv = "+tv )
//								console.log("otherAsset = "+otherAsset)
								
//								$.ajax({
//									url : 'CustomerFormController',
//									method : 'post',
//									dataType : 'json',
//									async : false,
//									data : {
//										action : "insertGeneralInformation",
//											isLoanTaken : isLoanTaken,
//											donarName : donarName ,
//											loanPayment : loanPayment ,
//											loanPeriod : loanPeriod ,
//											monthlyInstallment : monthlyInstallment ,
//											remaining : remaining ,
//											isBankAccount : isBankAccount ,
//											bankName : bankName ,
//											ups : ups ,
//											electricity : electricity ,
//											solar : solar ,
//											isOtherSource : isOtherSource ,
//											otherSource : otherSource ,
//											electricityExpensive : electricityExpensive ,
//											majorExpenseDescription : majorExpenseDescription ,
//											majorExpenseAmount : majorExpenseAmount ,
//											totalExpense : totalExpense ,
//											home : home ,
//											car : car ,
//											bike : bike ,
//											wishingMachine : wishingMachine ,
//											fridge : fridge ,
//											tv : tv ,
//											otherAsset : otherAsset
//									},
//									success : function(json){
//										console.log("Saved")
//										console.log(json)
//									}
//								})
								return false;

							}else{
								console.log("Not Saved")
							}
						}
					}
					else if(t.index==3) {
						console.log("Moved to 3")
						if(false===$('form[name="form-wizard"]').parsley().validate("wizard-step-4")) {
							return false;
						}else if(t.nextIndex > t.index){
							console.log("Four")
						}
					}
					else if(t.index==4) {
						console.log("Moved to 4")
						if(false===$('form[name="form-wizard"]').parsley().validate("wizard-step-5")) {
							return false;
						}else if(t.nextIndex > t.index){
							console.log("Five")
						}
					}
				}
			}
	)
};
	
var FormWizardValidation = function(){
	"use strict";
	return {
		init:function(){
			handleBootstrapWizardsValidation()
			}
		}
	}
()/*   
Template Name: Color Admin - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.3.4
Version: 1.7.0
Author: Sean Ngu
Website: http://www.seantheme.com/color-admin-v1.7/admin/
*/
var 
handleBootstrapWizardsValidation
=function()
{"use strict";
$("#wizard").bwizard({validating:function(e,t){
	if(t.index==0)
	{
		if(false===$('form[name="form-wizard"]').parsley().validate("wizard-step-1"))
		{
			return false;
		}
	}
	else if(t.index==1)
	{
		if(false===$('form[name="form-wizard"]').parsley().validate("wizard-step-2"))
	
		{
			return false;
		}
	}
	else if(t.index==2)
	{
		if(false===$('form[name="form-wizard"]').parsley().validate("wizard-step-3"))
	
		{
			return false;
		}
	}
	else if(t.index==3)
	{
		if(false===$('form[name="form-wizard"]').parsley().validate("wizard-step-4"))
	
		{
			return false;
		}
	}
	else if(t.index==4)
	{
		if(false===$('form[name="form-wizard"]').parsley().validate("wizard-step-5"))
	
		{
			return false;
		}
	}
	}})};
	
var FormWizardValidation=function(){"use strict";return{init:function(){handleBootstrapWizardsValidation()}}}()